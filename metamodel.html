<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Metamodel | Post-Labor Economics</title>
  <link rel="icon" type="image/svg+xml" href="ple-logo.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,300;9..144,400;9..144,600;9..144,700&family=DM+Mono:wght@400;500&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    /* ─── RESET & BASE ────────────────────────────────────── */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --hz:  #1B4D3E;
      --hz2: #2D6A54;
      --hz3: #143B30;
      --dn:  #F4A261;
      --dn2: #F7BD8A;
      --mid: #0D1B2A;
      --mid2: #1B2D42;
      --sge: #4A7C6F;
      --crm: #FAF8F5;
      --pch: #F5F3EF;
      --mst: #E9ECEF;
      --stn: #6C757D;
      --mono: 'DM Mono', 'JetBrains Mono', monospace;
      --serif: 'Fraunces', Georgia, serif;
      --sans: 'Inter', system-ui, sans-serif;
      --panel-w: 400px;
    }

    html { font-size: 15px; }

    body {
      font-family: var(--sans);
      background: var(--crm);
      color: var(--mid);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* ─── HEADER ──────────────────────────────────────────── */
    .header {
      background: var(--mid);
      color: white;
      padding: 0 1.5rem;
      height: 56px;
      display: flex;
      align-items: center;
      gap: 1.5rem;
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 1px solid rgba(255,255,255,0.06);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.625rem;
      text-decoration: none;
      flex-shrink: 0;
    }

    .logo-symbol {
      font-family: var(--serif);
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--dn);
    }

    .logo-text {
      font-size: 0.8125rem;
      font-weight: 500;
      color: rgba(255,255,255,0.65);
      display: none;
    }

    @media (min-width: 640px) { .logo-text { display: block; } }

    .nav-menu {
      display: flex;
      gap: 0.125rem;
      flex: 1;
    }

    .nav-menu a {
      color: rgba(255,255,255,0.55);
      text-decoration: none;
      font-size: 0.8rem;
      font-weight: 500;
      padding: 0.375rem 0.625rem;
      border-radius: 6px;
      transition: all 0.15s;
    }

    .nav-menu a:hover { color: white; background: rgba(255,255,255,0.07); }
    .nav-menu a.active { color: var(--dn); }

    .header-right {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* ─── PAGE LAYOUT ─────────────────────────────────────── */
    .page-wrap {
      display: flex;
      flex: 1;
      overflow: hidden;
      height: calc(100vh - 56px);
    }

    /* ─── LEFT SIDEBAR — NAVIGATOR ────────────────────────── */
    .nav-sidebar {
      width: 260px;
      flex-shrink: 0;
      background: white;
      border-right: 1px solid var(--mst);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .nav-sidebar-header {
      padding: 1rem 1rem 0.75rem;
      border-bottom: 1px solid var(--mst);
    }

    .nav-sidebar-title {
      font-family: var(--serif);
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--hz);
      margin-bottom: 0.625rem;
    }

    .nav-search {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--pch);
      border: 1px solid var(--mst);
      border-radius: 6px;
      padding: 0.375rem 0.625rem;
    }

    .nav-search input {
      border: none;
      background: transparent;
      font-size: 0.8rem;
      color: var(--mid);
      width: 100%;
      outline: none;
    }

    .nav-search svg { color: var(--stn); width: 14px; height: 14px; flex-shrink: 0; }

    .nav-sections {
      overflow-y: auto;
      flex: 1;
    }

    .nav-section {
      border-bottom: 1px solid var(--mst);
    }

    .nav-section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.625rem 1rem;
      cursor: pointer;
      user-select: none;
      background: var(--pch);
      gap: 0.5rem;
    }

    .nav-section-label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.72rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.07em;
      color: var(--stn);
    }

    .nav-section-count {
      font-size: 0.68rem;
      background: var(--mst);
      color: var(--stn);
      padding: 0.1rem 0.4rem;
      border-radius: 10px;
      font-weight: 600;
    }

    .nav-section-chevron { width: 14px; height: 14px; color: var(--stn); transition: transform 0.2s; }
    .nav-section.open .nav-section-chevron { transform: rotate(90deg); }

    .nav-items {
      display: none;
      padding: 0.25rem 0;
    }

    .nav-section.open .nav-items { display: block; }

    .nav-item {
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      cursor: pointer;
      transition: background 0.15s;
      border-left: 2px solid transparent;
    }

    .nav-item:hover { background: var(--pch); }

    .nav-item.active {
      background: rgba(27,77,62,0.06);
      border-left-color: var(--hz);
    }

    .nav-item-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      margin-top: 4px;
      flex-shrink: 0;
    }

    .nav-item-title {
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--mid);
      line-height: 1.35;
    }

    .nav-item-meta {
      font-size: 0.7rem;
      color: var(--stn);
      margin-top: 0.1rem;
    }

    /* ─── MAIN CONTENT AREA ───────────────────────────────── */
    .main-area {
      flex: 1;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }

    /* ─── OVERVIEW PANEL (default state) ──────────────────── */
    .overview-panel {
      padding: 2rem;
      max-width: 900px;
    }

    .overview-hero {
      background: linear-gradient(135deg, var(--hz) 0%, #1a3d2f 60%, var(--mid) 100%);
      border-radius: 1rem;
      padding: 2rem;
      color: white;
      margin-bottom: 2rem;
      position: relative;
      overflow: hidden;
    }

    .overview-hero::after {
      content: 'M';
      position: absolute;
      bottom: -2rem;
      right: 1rem;
      font-family: var(--serif);
      font-size: 12rem;
      font-weight: 700;
      color: rgba(255,255,255,0.04);
      pointer-events: none;
      line-height: 1;
    }

    .overview-hero h1 {
      font-family: var(--serif);
      font-size: 1.75rem;
      font-weight: 600;
      color: white;
      margin-bottom: 0.5rem;
    }

    .overview-hero p {
      color: rgba(255,255,255,0.7);
      font-size: 0.9rem;
      line-height: 1.6;
      max-width: 560px;
      margin-bottom: 1.5rem;
    }

    .hero-stats {
      display: flex;
      gap: 1.75rem;
      flex-wrap: wrap;
    }

    .hero-stat-val { font-size: 1.5rem; font-weight: 700; color: var(--dn); }
    .hero-stat-lbl { font-size: 0.7rem; color: rgba(255,255,255,0.45); text-transform: uppercase; letter-spacing: 0.06em; }

    /* ─── LAYER DIAGRAM ───────────────────────────────────── */
    .metamodel-layers {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    @media (max-width: 700px) { .metamodel-layers { grid-template-columns: 1fr; } }

    .layer-card {
      background: white;
      border: 1px solid var(--mst);
      border-radius: 0.75rem;
      padding: 1.25rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .layer-card:hover {
      border-color: var(--hz);
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(27,77,62,0.1);
    }

    .layer-card-num {
      font-family: var(--mono);
      font-size: 0.7rem;
      font-weight: 500;
      color: var(--stn);
      margin-bottom: 0.375rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .layer-card-title {
      font-family: var(--serif);
      font-size: 1rem;
      font-weight: 600;
      color: var(--hz);
      margin-bottom: 0.375rem;
    }

    .layer-card-desc {
      font-size: 0.78rem;
      color: var(--stn);
      line-height: 1.5;
      margin-bottom: 0.875rem;
    }

    .layer-card-types {
      display: flex;
      flex-wrap: wrap;
      gap: 0.375rem;
    }

    .type-chip {
      font-size: 0.68rem;
      font-family: var(--mono);
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      border: 1px solid currentColor;
      opacity: 0.75;
    }

    /* ─── FRAMEWORKS GRID ─────────────────────────────────── */
    .section-title {
      font-family: var(--serif);
      font-size: 1.15rem;
      font-weight: 600;
      color: var(--hz);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .fw-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 0.875rem;
      margin-bottom: 2rem;
    }

    .fw-card {
      background: white;
      border: 1px solid var(--mst);
      border-radius: 0.75rem;
      padding: 1.125rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .fw-card:hover {
      border-color: var(--hz2);
      box-shadow: 0 4px 16px rgba(27,77,62,0.08);
    }

    .fw-card-code {
      font-family: var(--mono);
      font-size: 0.68rem;
      color: var(--stn);
      margin-bottom: 0.375rem;
      letter-spacing: 0.04em;
    }

    .fw-card-title {
      font-family: var(--serif);
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--hz);
      margin-bottom: 0.375rem;
    }

    .fw-card-desc {
      font-size: 0.75rem;
      color: var(--stn);
      line-height: 1.5;
    }

    .fw-card-footer {
      margin-top: 0.75rem;
      padding-top: 0.625rem;
      border-top: 1px solid var(--mst);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .scope-badge {
      font-size: 0.66rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding: 0.15rem 0.45rem;
      border-radius: 4px;
    }

    .scope-normative    { background: rgba(27,77,62,0.1);    color: var(--hz); }
    .scope-analytical   { background: rgba(107,154,196,0.15); color: #2a6b9e; }
    .scope-descriptive  { background: rgba(74,124,111,0.12);  color: var(--sge); }
    .scope-evaluative   { background: rgba(244,162,97,0.15);  color: #c4722a; }

    .completeness-dot {
      width: 8px; height: 8px; border-radius: 50%;
      display: inline-block;
    }

    .comp-complete   { background: #2D6A4F; }
    .comp-draft      { background: var(--dn); }
    .comp-outline    { background: var(--stn); }
    .comp-validated  { background: #7FC8A9; }

    /* ─── DETAIL PANEL ────────────────────────────────────── */
    .detail-panel {
      flex: 1;
      padding: 2rem;
      max-width: 820px;
      display: none;
    }

    .detail-panel.visible { display: block; }

    .detail-back {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      color: var(--stn);
      font-size: 0.8rem;
      cursor: pointer;
      margin-bottom: 1.5rem;
      padding: 0.25rem 0;
      border-bottom: 1px solid transparent;
      transition: all 0.15s;
    }

    .detail-back:hover { color: var(--hz); border-bottom-color: var(--hz); }

    .detail-header {
      margin-bottom: 1.75rem;
    }

    .detail-code {
      font-family: var(--mono);
      font-size: 0.72rem;
      color: var(--stn);
      margin-bottom: 0.375rem;
      letter-spacing: 0.04em;
    }

    .detail-title {
      font-family: var(--serif);
      font-size: 1.75rem;
      font-weight: 600;
      color: var(--hz);
      margin-bottom: 0.75rem;
      line-height: 1.2;
    }

    .detail-badges {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .detail-badge {
      font-size: 0.7rem;
      font-weight: 600;
      padding: 0.2rem 0.6rem;
      border-radius: 100px;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .badge-type-phenomenon  { background: rgba(231,111,81,0.12); color: #8B2500; }
    .badge-type-mechanism   { background: rgba(27,77,62,0.1);    color: var(--hz); }
    .badge-type-proposal    { background: rgba(107,154,196,0.15); color: #2a6b9e; }
    .badge-type-critique    { background: rgba(244,162,97,0.2);  color: #a05a15; }
    .badge-type-synthesis   { background: rgba(74,124,111,0.15);  color: #2a5f53; }

    .badge-mat-canonical   { border: 1.5px solid var(--hz); color: var(--hz); background: transparent; }
    .badge-mat-established { border: 1.5px solid var(--sge); color: var(--sge); background: transparent; }
    .badge-mat-developing  { border: 1.5px solid var(--stn); color: var(--stn); background: transparent; }
    .badge-mat-embryonic   { border: 1.5px dashed var(--stn); color: var(--stn); background: transparent; }

    .badge-conf-consensus  { background: rgba(45,106,79,0.1); color: #1d4b35; }
    .badge-conf-supported  { background: rgba(107,154,196,0.12); color: #2a5d80; }
    .badge-conf-contested  { background: rgba(244,162,97,0.15); color: #8a4b0a; }
    .badge-conf-speculative { background: rgba(108,117,125,0.1); color: var(--stn); }

    .detail-summary {
      font-size: 1rem;
      line-height: 1.7;
      color: var(--mid2);
      margin-bottom: 2rem;
      padding-left: 1rem;
      border-left: 3px solid var(--dn);
    }

    /* ─── DETAIL SECTIONS ─────────────────────────────────── */
    .detail-section {
      margin-bottom: 1.75rem;
    }

    .detail-section-title {
      font-size: 0.72rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--stn);
      margin-bottom: 0.875rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .detail-section-title::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--mst);
    }

    /* ─── RELATION ROWS ───────────────────────────────────── */
    .relation-row {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      padding: 0.625rem 0;
      border-bottom: 1px solid var(--mst);
      cursor: pointer;
      transition: background 0.15s;
      border-radius: 6px;
      padding: 0.625rem 0.75rem;
      margin: 0 -0.75rem;
    }

    .relation-row:hover { background: var(--pch); }
    .relation-row:last-child { border-bottom: none; }

    .rel-type-tag {
      font-family: var(--mono);
      font-size: 0.65rem;
      padding: 0.15rem 0.4rem;
      border-radius: 3px;
      background: rgba(27,77,62,0.08);
      color: var(--hz);
      flex-shrink: 0;
      margin-top: 2px;
      white-space: nowrap;
    }

    .rel-target { flex: 1; }
    .rel-target-name { font-size: 0.85rem; font-weight: 500; color: var(--mid); }
    .rel-target-desc { font-size: 0.75rem; color: var(--stn); margin-top: 0.1rem; line-height: 1.4; }

    /* ─── TENSION ROWS ────────────────────────────────────── */
    .tension-row {
      background: white;
      border: 1px solid var(--mst);
      border-left: 3px solid var(--dn);
      border-radius: 0 0.5rem 0.5rem 0;
      padding: 0.875rem;
      margin-bottom: 0.625rem;
    }

    .tension-title { font-size: 0.875rem; font-weight: 600; color: var(--mid); margin-bottom: 0.25rem; }
    .tension-desc  { font-size: 0.78rem; color: var(--stn); line-height: 1.5; }

    .tension-meta {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }

    .tension-chip {
      font-size: 0.66rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      padding: 0.1rem 0.4rem;
      border-radius: 3px;
    }

    .sev-fundamental { background: rgba(214,40,40,0.1); color: #a01010; }
    .sev-significant  { background: rgba(244,162,97,0.15); color: #8a4b0a; }
    .sev-minor        { background: rgba(108,117,125,0.1); color: var(--stn); }

    /* ─── EVIDENCE ROWS ────────────────────────────────────── */
    .evidence-row {
      display: flex;
      gap: 0.75rem;
      padding: 0.875rem 0;
      border-bottom: 1px solid var(--mst);
    }

    .evidence-row:last-child { border-bottom: none; }

    .ev-quality-bar {
      width: 4px;
      border-radius: 2px;
      flex-shrink: 0;
      background: var(--mst);
      align-self: stretch;
    }

    .ev-q-consensus    { background: #2D6A4F; }
    .ev-q-longitudinal { background: var(--hz2); }
    .ev-q-meta_analysis { background: #7FC8A9; }
    .ev-q-pilot        { background: var(--dn); }
    .ev-q-anecdotal    { background: var(--stn); }

    .ev-content { flex: 1; }
    .ev-title   { font-size: 0.875rem; font-weight: 600; color: var(--mid); margin-bottom: 0.2rem; }
    .ev-desc    { font-size: 0.75rem; color: var(--stn); line-height: 1.5; margin-bottom: 0.35rem; }
    .ev-meta    { display: flex; gap: 0.5rem; flex-wrap: wrap; }

    .ev-chip {
      font-size: 0.65rem;
      font-family: var(--mono);
      padding: 0.1rem 0.4rem;
      border-radius: 3px;
      background: var(--pch);
      color: var(--stn);
    }

    /* ─── FRAMEWORK ELEMENTS (pyramid) ────────────────────── */
    .pyramid-stack {
      display: flex;
      flex-direction: column-reverse;
      gap: 0.375rem;
      margin-bottom: 1.5rem;
    }

    .pyramid-layer-card {
      background: white;
      border: 1px solid var(--mst);
      border-radius: 0.5rem;
      padding: 0.875rem 1rem;
      display: grid;
      grid-template-columns: 36px 1fr;
      gap: 0.75rem;
      align-items: start;
      cursor: pointer;
      transition: all 0.15s;
    }

    .pyramid-layer-card:hover {
      border-color: var(--hz);
      background: rgba(27,77,62,0.02);
    }

    .pyramid-layer-num {
      width: 36px;
      height: 36px;
      background: var(--hz);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--serif);
      font-size: 1rem;
      font-weight: 700;
      flex-shrink: 0;
    }

    .pyramid-layer-title { font-size: 0.875rem; font-weight: 600; color: var(--hz); margin-bottom: 0.2rem; }
    .pyramid-layer-role  { font-size: 0.75rem; color: var(--stn); margin-bottom: 0.35rem; }
    .pyramid-layer-desc  { font-size: 0.75rem; color: var(--mid2); line-height: 1.5; }

    /* ─── TENSIONS OVERVIEW ───────────────────────────────── */
    .tensions-overview {
      margin-bottom: 2rem;
    }

    /* ─── CONCEPT GRID ─────────────────────────────────────── */
    .concept-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 0.75rem;
      margin-bottom: 2rem;
    }

    .concept-card {
      background: white;
      border: 1px solid var(--mst);
      border-radius: 0.625rem;
      padding: 0.875rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .concept-card:hover {
      border-color: var(--hz2);
      box-shadow: 0 2px 8px rgba(27,77,62,0.08);
      transform: translateY(-1px);
    }

    .concept-card-code {
      font-family: var(--mono);
      font-size: 0.63rem;
      color: var(--stn);
      margin-bottom: 0.25rem;
    }

    .concept-card-title {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--mid);
      margin-bottom: 0.375rem;
      line-height: 1.3;
    }

    .concept-card-tags {
      display: flex;
      gap: 0.3rem;
      flex-wrap: wrap;
    }

    .ctype-chip {
      font-size: 0.6rem;
      font-weight: 600;
      padding: 0.1rem 0.35rem;
      border-radius: 3px;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .ct-phenomenon  { background: rgba(231,111,81,0.1); color: #7a2000; }
    .ct-mechanism   { background: rgba(27,77,62,0.1);   color: var(--hz); }
    .ct-proposal    { background: rgba(107,154,196,0.15); color: #1d4f72; }
    .ct-critique    { background: rgba(244,162,97,0.15); color: #7a4208; }
    .ct-synthesis   { background: rgba(74,124,111,0.15); color: #2a5f53; }

    .domain-chip {
      font-size: 0.6rem;
      background: var(--pch);
      color: var(--stn);
      padding: 0.1rem 0.35rem;
      border-radius: 3px;
    }

    /* ─── LOADING / ERROR ─────────────────────────────────── */
    .loading-state {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 3rem;
      color: var(--stn);
      gap: 0.75rem;
      font-size: 0.875rem;
    }

    .spinner {
      width: 20px;
      height: 20px;
      border: 2px solid var(--mst);
      border-top-color: var(--hz);
      border-radius: 50%;
      animation: spin 0.75s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    /* ─── FILTER BAR ──────────────────────────────────────── */
    .filter-bar {
      display: flex;
      gap: 0.375rem;
      flex-wrap: wrap;
      margin-bottom: 1.25rem;
    }

    .filter-chip {
      font-size: 0.75rem;
      font-weight: 500;
      padding: 0.3rem 0.75rem;
      border-radius: 100px;
      border: 1px solid var(--mst);
      background: white;
      color: var(--stn);
      cursor: pointer;
      transition: all 0.15s;
    }

    .filter-chip:hover { border-color: var(--hz); color: var(--hz); }
    .filter-chip.active { background: var(--hz); color: white; border-color: var(--hz); }

    /* ─── RESPONSIVE ──────────────────────────────────────── */
    @media (max-width: 768px) {
      .nav-sidebar { display: none; }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <a href="index.html" class="logo">
      <span class="logo-symbol">L/0</span>
      <span class="logo-text">Post-Labor Economics</span>
    </a>
    <nav class="nav-menu">
      <a href="index.html">Home</a>
      <a href="architecture.html">Architecture</a>
      <a href="metamodel.html" class="active">Metamodel</a>
      <a href="projects.html">Projects</a>
      <a href="proposals.html">Proposals</a>
      <a href="gato.html">GATO</a>
      <a href="prime.html">PRIME</a>
    </nav>
    <div class="header-right">
      <a href="login.html" id="login-btn" style="font-size:0.8rem; color:rgba(255,255,255,0.6); text-decoration:none;">Sign In</a>
    </div>
  </header>

  <div class="page-wrap">
    <!-- Left Navigator Sidebar -->
    <nav class="nav-sidebar">
      <div class="nav-sidebar-header">
        <div class="nav-sidebar-title">Ontology Navigator</div>
        <div class="nav-search">
          <i data-lucide="search"></i>
          <input type="text" id="nav-search-input" placeholder="Search concepts…">
        </div>
      </div>
      <div class="nav-sections">
        <!-- Frameworks -->
        <div class="nav-section open" data-section="frameworks">
          <div class="nav-section-header">
            <span class="nav-section-label">
              <span>Frameworks</span>
              <span class="nav-section-count" id="fw-count">—</span>
            </span>
            <i data-lucide="chevron-right" class="nav-section-chevron"></i>
          </div>
          <div class="nav-items" id="nav-frameworks"></div>
        </div>
        <!-- Concepts — Phenomena -->
        <div class="nav-section open" data-section="phenomena">
          <div class="nav-section-header">
            <span class="nav-section-label">
              <span>Phenomena</span>
              <span class="nav-section-count" id="phen-count">—</span>
            </span>
            <i data-lucide="chevron-right" class="nav-section-chevron"></i>
          </div>
          <div class="nav-items" id="nav-phenomena"></div>
        </div>
        <!-- Concepts — Proposals -->
        <div class="nav-section" data-section="proposals">
          <div class="nav-section-header">
            <span class="nav-section-label">
              <span>Proposals</span>
              <span class="nav-section-count" id="prop-count">—</span>
            </span>
            <i data-lucide="chevron-right" class="nav-section-chevron"></i>
          </div>
          <div class="nav-items" id="nav-proposals"></div>
        </div>
        <!-- Concepts — Mechanisms -->
        <div class="nav-section" data-section="mechanisms">
          <div class="nav-section-header">
            <span class="nav-section-label">
              <span>Mechanisms</span>
              <span class="nav-section-count" id="mech-count">—</span>
            </span>
            <i data-lucide="chevron-right" class="nav-section-chevron"></i>
          </div>
          <div class="nav-items" id="nav-mechanisms"></div>
        </div>
        <!-- Critiques & Syntheses -->
        <div class="nav-section" data-section="critiques">
          <div class="nav-section-header">
            <span class="nav-section-label">
              <span>Critiques & Syntheses</span>
              <span class="nav-section-count" id="crit-count">—</span>
            </span>
            <i data-lucide="chevron-right" class="nav-section-chevron"></i>
          </div>
          <div class="nav-items" id="nav-critiques"></div>
        </div>
        <!-- Tensions -->
        <div class="nav-section" data-section="tensions">
          <div class="nav-section-header">
            <span class="nav-section-label">
              <span>Tensions</span>
              <span class="nav-section-count" id="ten-count">—</span>
            </span>
            <i data-lucide="chevron-right" class="nav-section-chevron"></i>
          </div>
          <div class="nav-items" id="nav-tensions"></div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="main-area" id="main-area">
      <!-- Overview (default) -->
      <div class="overview-panel" id="overview-panel">
        <div class="overview-hero">
          <h1>PLE Holistic Metamodel</h1>
          <p>
            The ontological architecture of Post-Labor Economics — a typed vocabulary of concepts, frameworks, 
            mechanisms, and their relationships. Navigate the intellectual structure of the movement.
          </p>
          <div class="hero-stats">
            <div><div class="hero-stat-val" id="stat-frameworks">—</div><div class="hero-stat-lbl">Frameworks</div></div>
            <div><div class="hero-stat-val" id="stat-concepts">—</div><div class="hero-stat-lbl">Concepts</div></div>
            <div><div class="hero-stat-val" id="stat-tensions">—</div><div class="hero-stat-lbl">Tensions</div></div>
            <div><div class="hero-stat-val" id="stat-evidence">—</div><div class="hero-stat-lbl">Evidence Sources</div></div>
          </div>
        </div>

        <!-- Four Layers -->
        <div class="section-title">Four Metamodel Layers</div>
        <div class="metamodel-layers">
          <div class="layer-card" onclick="showConceptsBrowser('all')">
            <div class="layer-card-num">Layer 1 — Theory</div>
            <div class="layer-card-title">Concepts & Tensions</div>
            <div class="layer-card-desc">What PLE thinks — phenomena, mechanisms, proposals, critiques, syntheses, and the documented trade-offs between them.</div>
            <div class="layer-card-types">
              <span class="type-chip" style="color:#7a2000">phenomenon</span>
              <span class="type-chip" style="color:var(--hz)">mechanism</span>
              <span class="type-chip" style="color:#1d4f72">proposal</span>
              <span class="type-chip" style="color:#7a4208">critique</span>
              <span class="type-chip" style="color:#2a5f53">synthesis</span>
            </div>
          </div>
          <div class="layer-card" onclick="showFrameworks()">
            <div class="layer-card-num">Layer 2 — Architecture</div>
            <div class="layer-card-title">Frameworks & Models</div>
            <div class="layer-card-desc">How PLE organizes its thinking — the major analytical frameworks (L/0, Pyramids, GATO, PRIME, LVN) and their internal structures.</div>
            <div class="layer-card-types">
              <span class="type-chip" style="color:var(--hz)">framework</span>
              <span class="type-chip" style="color:var(--sge)">model</span>
              <span class="type-chip" style="color:var(--stn)">layer</span>
            </div>
          </div>
          <div class="layer-card" onclick="showTensions()">
            <div class="layer-card-num">Layer 3 — Praxis</div>
            <div class="layer-card-title">Tensions & Trade-offs</div>
            <div class="layer-card-desc">What PLE has not yet resolved — the fundamental dilemmas that honest post-labor theory must acknowledge rather than paper over.</div>
            <div class="layer-card-types">
              <span class="type-chip" style="color:#a01010">fundamental</span>
              <span class="type-chip" style="color:#8a4b0a">significant</span>
              <span class="type-chip" style="color:var(--stn)">minor</span>
            </div>
          </div>
          <div class="layer-card" onclick="showEvidence()">
            <div class="layer-card-num">Layer 4 — Epistemology</div>
            <div class="layer-card-title">Evidence & Lineage</div>
            <div class="layer-card-desc">How PLE knows — empirical anchors from real experiments, case studies, and research, plus the intellectual lineage the movement draws on and responds to.</div>
            <div class="layer-card-types">
              <span class="type-chip" style="color:#1d4b35">case study</span>
              <span class="type-chip" style="color:var(--hz2)">research</span>
              <span class="type-chip" style="color:var(--stn)">lineage</span>
            </div>
          </div>
        </div>

        <!-- Frameworks Quick View -->
        <div class="section-title">Core Frameworks</div>
        <div class="fw-grid" id="fw-overview-grid">
          <div class="loading-state"><div class="spinner"></div> Loading frameworks…</div>
        </div>
      </div>

      <!-- Detail Panel -->
      <div class="detail-panel" id="detail-panel">
        <div class="detail-back" onclick="showOverview()">
          <i data-lucide="arrow-left" style="width:14px;height:14px"></i>
          Back to overview
        </div>
        <div id="detail-content"></div>
      </div>
    </div>
  </div>

  <script>
    // ─────────────────────────────────────────────
    // STATE
    // ─────────────────────────────────────────────

    const state = {
      frameworks: [],
      concepts: [],
      tensions: [],
      evidence: [],
      sources: [],
      loaded: false
    };

    // ─────────────────────────────────────────────
    // API
    // ─────────────────────────────────────────────

    async function apiFetch(resource, params = {}) {
      // Use URLSearchParams on its own — avoids new URL() failing on file:// (null origin)
      const qs = new URLSearchParams({ resource, ...params }).toString();
      const res = await fetch(`/api/concepts?${qs}`);
      if (!res.ok) throw new Error(`API error: ${res.status}`);
      return res.json();
    }

    // ─────────────────────────────────────────────
    // LOAD ALL DATA
    // ─────────────────────────────────────────────

    async function loadAll() {
      try {
        const [fwData, conData, tenData, evData, srcData] = await Promise.all([
          apiFetch('frameworks'),
          apiFetch('concepts', { limit: 100 }),
          apiFetch('tensions'),
          apiFetch('evidence'),
          apiFetch('sources')
        ]);

        state.frameworks = fwData.frameworks || [];
        state.concepts = conData.concepts || [];
        state.tensions = tenData.tensions || [];
        state.evidence = evData.evidence || [];
        state.sources = srcData.sources || [];
        state.loaded = true;

        renderAll();
      } catch (e) {
        console.error('Load error:', e);
        // Show static fallback if API not available
        renderStaticFallback();
      }
    }

    function renderAll() {
      updateStats();
      renderNavSidebar();
      renderFwOverview();
    }

    function updateStats() {
      document.getElementById('stat-frameworks').textContent = state.frameworks.length;
      document.getElementById('stat-concepts').textContent = state.concepts.length;
      document.getElementById('stat-tensions').textContent = state.tensions.length;
      document.getElementById('stat-evidence').textContent = state.evidence.length;
    }

    // ─────────────────────────────────────────────
    // SIDEBAR NAVIGATION
    // ─────────────────────────────────────────────

    function renderNavSidebar() {
      // Frameworks
      const fwContainer = document.getElementById('nav-frameworks');
      document.getElementById('fw-count').textContent = state.frameworks.length;
      fwContainer.innerHTML = state.frameworks.map(fw => `
        <div class="nav-item" onclick="showFrameworkDetail('${fw.id}')">
          <div class="nav-item-dot" style="background:var(--hz)"></div>
          <div>
            <div class="nav-item-title">${fw.title}</div>
            <div class="nav-item-meta">${fw.code} · ${fw.scope}</div>
          </div>
        </div>
      `).join('');

      // Group concepts by type
      const typeGroups = {
        phenomena: state.concepts.filter(c => c.concept_type === 'phenomenon'),
        mechanisms: state.concepts.filter(c => c.concept_type === 'mechanism'),
        proposals: state.concepts.filter(c => c.concept_type === 'proposal'),
        critiques: [...state.concepts.filter(c => c.concept_type === 'critique'), ...state.concepts.filter(c => c.concept_type === 'synthesis')]
      };

      const colors = {
        phenomenon: '#7a2000', mechanism: 'var(--hz)', proposal: '#1d4f72',
        critique: '#7a4208', synthesis: '#2a5f53'
      };

      Object.entries({
        'nav-phenomena': typeGroups.phenomena,
        'nav-mechanisms': typeGroups.mechanisms,
        'nav-proposals': typeGroups.proposals,
        'nav-critiques': typeGroups.critiques
      }).forEach(([id, concepts]) => {
        const container = document.getElementById(id);
        if (container) {
          container.innerHTML = concepts.map(c => `
            <div class="nav-item" onclick="showConceptDetail('${c.id}')">
              <div class="nav-item-dot" style="background:${colors[c.concept_type] || 'var(--stn)'}"></div>
              <div>
                <div class="nav-item-title">${c.title}</div>
                <div class="nav-item-meta">${c.code}</div>
              </div>
            </div>
          `).join('');
        }
      });

      document.getElementById('phen-count').textContent = typeGroups.phenomena.length;
      document.getElementById('mech-count').textContent = typeGroups.mechanisms.length;
      document.getElementById('prop-count').textContent = typeGroups.proposals.length;
      document.getElementById('crit-count').textContent = typeGroups.critiques.length;

      // Tensions
      const tenContainer = document.getElementById('nav-tensions');
      document.getElementById('ten-count').textContent = state.tensions.length;
      tenContainer.innerHTML = state.tensions.map(t => `
        <div class="nav-item" onclick="showTensionDetail('${t.id}')">
          <div class="nav-item-dot" style="background:${t.severity === 'fundamental' ? '#a01010' : t.severity === 'significant' ? 'var(--dn)' : 'var(--stn)'}"></div>
          <div>
            <div class="nav-item-title">${t.title}</div>
            <div class="nav-item-meta">${t.tension_type} · ${t.severity}</div>
          </div>
        </div>
      `).join('');
    }

    function renderFwOverview() {
      const grid = document.getElementById('fw-overview-grid');
      grid.innerHTML = state.frameworks.map(fw => `
        <div class="fw-card" onclick="showFrameworkDetail('${fw.id}')">
          <div class="fw-card-code">${fw.code}</div>
          <div class="fw-card-title">${fw.title}</div>
          <div class="fw-card-desc">${fw.summary.slice(0, 120)}…</div>
          <div class="fw-card-footer">
            <span class="scope-badge scope-${fw.scope}">${fw.scope}</span>
            <span title="${fw.completeness}">
              <span class="completeness-dot comp-${fw.completeness}"></span>
              &nbsp;${fw.completeness}
            </span>
          </div>
        </div>
      `).join('');
    }

    // ─────────────────────────────────────────────
    // DETAIL VIEWS
    // ─────────────────────────────────────────────

    function showOverview() {
      document.getElementById('overview-panel').style.display = '';
      document.getElementById('detail-panel').classList.remove('visible');
    }

    function showDetail(html) {
      document.getElementById('overview-panel').style.display = 'none';
      const panel = document.getElementById('detail-panel');
      panel.classList.add('visible');
      document.getElementById('detail-content').innerHTML = html;
      window.lucide.createIcons();
    }

    async function showFrameworkDetail(id) {
      const fw = state.frameworks.find(f => f.id === id);
      if (!fw) return;

      let elementsHtml = '<div class="loading-state"><div class="spinner"></div> Loading elements…</div>';
      showDetail(renderFrameworkShell(fw, elementsHtml));

      try {
        const data = await apiFetch('frameworks', { id });
        const elements = (data.elements || []).sort((a, b) => (a.layer_number || 0) - (b.layer_number || 0));
        elementsHtml = renderFrameworkElements(fw, elements);
        document.getElementById('fw-elements-container').innerHTML = elementsHtml;
        window.lucide.createIcons();
      } catch (e) {
        document.getElementById('fw-elements-container').innerHTML = '<p style="color:var(--stn);font-size:0.8rem;padding:1rem 0">Could not load elements — API may be initializing.</p>';
      }
    }

    function renderFrameworkShell(fw, elementsContent) {
      return `
        <div class="detail-header">
          <div class="detail-code">${fw.code}</div>
          <div class="detail-title">${fw.title}</div>
          <div class="detail-badges">
            <span class="detail-badge scope-${fw.scope}">${fw.scope}</span>
            <span class="detail-badge badge-mat-${fw.completeness}">${fw.completeness}</span>
            ${fw.layer_count ? `<span class="detail-badge" style="background:var(--pch);color:var(--stn)">${fw.layer_count} layers</span>` : ''}
          </div>
        </div>
        <div class="detail-summary">${fw.summary}</div>
        <div class="detail-section-title">Framework Elements <span style="margin-left:0.25rem;opacity:0.4">──────────────────────────────────</span></div>
        <div id="fw-elements-container">${elementsContent}</div>
      `;
    }

    function renderFrameworkElements(fw, elements) {
      if (!elements.length) return '<p style="color:var(--stn);font-size:0.8rem">No elements loaded yet.</p>';

      // Use pyramid for layered frameworks
      const isLayered = elements.some(e => e.layer_number);

      if (isLayered) {
        const sorted = [...elements].sort((a, b) => (b.layer_number || 0) - (a.layer_number || 0));
        return `<div class="pyramid-stack">${sorted.map(el => `
          <div class="pyramid-layer-card" style="margin-left:${((el.layer_number||1)-1)*8}px">
            <div class="pyramid-layer-num">${el.layer_number}</div>
            <div>
              <div class="pyramid-layer-title">${el.title}</div>
              <div class="pyramid-layer-role">${el.element_role || ''}</div>
              <div class="pyramid-layer-desc">${el.description || ''}</div>
            </div>
          </div>
        `).join('')}</div>`;
      }

      return `<div style="display:flex;flex-direction:column;gap:0.625rem">
        ${elements.map(el => `
          <div style="background:white;border:1px solid var(--mst);border-radius:0.5rem;padding:0.875rem">
            <div style="font-size:0.8rem;font-weight:600;color:var(--hz);margin-bottom:0.2rem">${el.title}</div>
            <div style="font-size:0.75rem;color:var(--stn);line-height:1.5">${el.description || ''}</div>
          </div>
        `).join('')}
      </div>`;
    }

    async function showConceptDetail(id) {
      const c = state.concepts.find(x => x.id === id);
      if (!c) return;
      showDetail(renderConceptShell(c));

      try {
        const data = await apiFetch('concepts', { id });
        const concept = data.concept || c;
        const relations = data.relations || [];
        const evidence = data.evidence || [];
        const tensions = data.tensions || [];
        document.getElementById('concept-detail-extra').innerHTML = renderConceptExtra(relations, evidence, tensions);
        window.lucide.createIcons();
      } catch (e) {
        document.getElementById('concept-detail-extra').innerHTML = '<p style="color:var(--stn);font-size:0.8rem;padding:1rem 0">Could not load relationships — API may be initializing.</p>';
      }
    }

    function renderConceptShell(c) {
      return `
        <div class="detail-header">
          <div class="detail-code">${c.code}</div>
          <div class="detail-title">${c.title}</div>
          <div class="detail-badges">
            <span class="detail-badge badge-type-${c.concept_type}">${c.concept_type}</span>
            <span class="detail-badge badge-mat-${c.maturity}">${c.maturity}</span>
            <span class="detail-badge badge-conf-${c.confidence}">${c.confidence}</span>
            <span class="detail-badge" style="background:var(--pch);color:var(--stn)">${c.domain}</span>
            ${c.is_core_ple ? '<span class="detail-badge" style="background:rgba(27,77,62,0.12);color:var(--hz)">Core PLE</span>' : ''}
          </div>
        </div>
        <div class="detail-summary">${c.summary}</div>
        ${c.origin_tradition ? `<div style="font-size:0.75rem;color:var(--stn);margin-bottom:1.5rem;display:flex;align-items:center;gap:0.5rem"><i data-lucide="book-open" style="width:13px;height:13px"></i> Intellectual tradition: <em>${c.origin_tradition}</em></div>` : ''}
        <div id="concept-detail-extra"><div class="loading-state"><div class="spinner"></div> Loading relationships…</div></div>
      `;
    }

    function renderConceptExtra(relations, evidence, tensions) {
      let html = '';

      if (relations.length) {
        html += `<div class="detail-section-title">Relationships</div>
        <div style="margin-bottom:1.5rem">${relations.map(r => `
          <div class="relation-row">
            <span class="rel-type-tag">${r.relation_type}</span>
            <div class="rel-target">
              <div class="rel-target-name">${r.target_id}</div>
              ${r.rel_desc ? `<div class="rel-target-desc">${r.rel_desc}</div>` : ''}
            </div>
          </div>
        `).join('')}</div>`;
      }

      if (tensions.length) {
        html += `<div class="detail-section-title">Documented Tensions</div>
        <div style="margin-bottom:1.5rem">${tensions.map(t => `
          <div class="tension-row">
            <div class="tension-title">${t.title}</div>
            <div class="tension-desc">${t.description}</div>
            <div class="tension-meta">
              <span class="tension-chip sev-${t.severity}">${t.severity}</span>
              <span class="tension-chip" style="background:var(--pch);color:var(--stn)">${t.tension_type}</span>
              <span class="tension-chip" style="background:var(--pch);color:var(--stn)">${t.resolution_status}</span>
            </div>
          </div>
        `).join('')}</div>`;
      }

      if (evidence.length) {
        html += `<div class="detail-section-title">Supporting Evidence</div>
        <div style="margin-bottom:1.5rem">${evidence.map(e => `
          <div class="evidence-row">
            <div class="evidence-quality-bar ev-q-${e.quality}"></div>
            <div class="ev-content">
              <div class="ev-title">${e.title} <span style="font-size:0.65rem;font-weight:400;color:var(--stn)">${e.link_type}</span></div>
              <div class="ev-desc">${e.description || ''}</div>
              <div class="ev-meta">
                <span class="ev-chip">${e.quality}</span>
                <span class="ev-chip">${e.evidence_type}</span>
                ${e.location ? `<span class="ev-chip">${e.location}</span>` : ''}
                ${e.time_period ? `<span class="ev-chip">${e.time_period}</span>` : ''}
              </div>
            </div>
          </div>
        `).join('')}</div>`;
      }

      if (!html) html = '<p style="color:var(--stn);font-size:0.8rem">No relationships documented yet.</p>';
      return html;
    }

    function showTensionDetail(id) {
      const t = state.tensions.find(x => x.id === id);
      if (!t) return;
      showDetail(`
        <div class="detail-header">
          <div class="detail-code">${t.code}</div>
          <div class="detail-title">${t.title}</div>
          <div class="detail-badges">
            <span class="tension-chip sev-${t.severity}">${t.severity}</span>
            <span class="detail-badge" style="background:var(--pch);color:var(--stn)">${t.tension_type}</span>
            <span class="detail-badge" style="background:var(--pch);color:var(--stn)">${t.resolution_status}</span>
          </div>
        </div>
        <div class="detail-summary">${t.description}</div>
        ${t.resolution_notes ? `
          <div class="detail-section-title">Resolution Notes</div>
          <p style="font-size:0.875rem;color:var(--mid2);line-height:1.7">${t.resolution_notes}</p>
        ` : `
          <div style="background:rgba(244,162,97,0.08);border:1px solid rgba(244,162,97,0.25);border-radius:0.625rem;padding:1rem 1.25rem;font-size:0.82rem;color:var(--stn)">
            ⚠️ This tension is currently <strong>${t.resolution_status}</strong>. 
            <a href="https://github.com/sillinous/PLEArchitecture/issues" target="_blank" style="color:var(--hz)">Contribute to resolution on GitHub →</a>
          </div>
        `}
      `);
    }

    function showTensions() {
      const html = `
        <div class="detail-header">
          <div class="detail-code">TENSIONS</div>
          <div class="detail-title">Documented Trade-offs</div>
        </div>
        <p style="color:var(--stn);font-size:0.875rem;line-height:1.7;margin-bottom:1.75rem">
          A theoretically honest framework acknowledges what it has not resolved. 
          These tensions are not bugs — they are known hard problems that PLE must navigate rather than pretend away.
        </p>
        ${state.tensions.map(t => `
          <div class="tension-row" style="cursor:pointer" onclick="showTensionDetail('${t.id}')">
            <div class="tension-title">${t.title}</div>
            <div class="tension-desc">${t.description.slice(0, 180)}…</div>
            <div class="tension-meta">
              <span class="tension-chip sev-${t.severity}">${t.severity}</span>
              <span class="tension-chip" style="background:var(--pch);color:var(--stn)">${t.tension_type}</span>
            </div>
          </div>
        `).join('')}
      `;
      showDetail(html);
    }

    function showEvidence() {
      const html = `
        <div class="detail-header">
          <div class="detail-code">EVIDENCE</div>
          <div class="detail-title">Empirical Anchors</div>
        </div>
        <p style="color:var(--stn);font-size:0.875rem;line-height:1.7;margin-bottom:1.75rem">
          Real-world experiments, case studies, and research that inform PLE theory. 
          Evidence quality is rated: consensus → meta-analysis → longitudinal → pilot → anecdotal.
        </p>
        ${state.evidence.map(e => `
          <div class="evidence-row" style="padding:1rem 0">
            <div class="evidence-quality-bar ev-q-${e.quality}" style="align-self:stretch"></div>
            <div class="ev-content">
              <div class="ev-title">${e.title}</div>
              <div class="ev-desc">${e.description}</div>
              <div class="ev-meta">
                <span class="ev-chip">${e.quality}</span>
                <span class="ev-chip">${e.evidence_type}</span>
                ${e.location ? `<span class="ev-chip">${e.location}</span>` : ''}
                ${e.time_period ? `<span class="ev-chip">${e.time_period}</span>` : ''}
              </div>
            </div>
          </div>
        `).join('')}
      `;
      showDetail(html);
    }

    function showFrameworks() { showOverview(); }

    function showConceptsBrowser(filter) {
      const concepts = filter === 'all' ? state.concepts : state.concepts.filter(c => c.concept_type === filter);
      const html = `
        <div class="detail-header">
          <div class="detail-code">CONCEPTS</div>
          <div class="detail-title">Conceptual Vocabulary</div>
        </div>
        <div class="filter-bar">
          ${['all','phenomenon','mechanism','proposal','critique','synthesis'].map(f => `
            <span class="filter-chip ${filter === f ? 'active' : ''}" onclick="showConceptsBrowser('${f}')">${f}</span>
          `).join('')}
        </div>
        <div class="concept-grid">
          ${concepts.map(c => `
            <div class="concept-card" onclick="showConceptDetail('${c.id}')">
              <div class="concept-card-code">${c.code}</div>
              <div class="concept-card-title">${c.title}</div>
              <div class="concept-card-tags">
                <span class="ctype-chip ct-${c.concept_type}">${c.concept_type}</span>
                <span class="domain-chip">${c.domain}</span>
                ${c.is_core_ple ? '<span class="ctype-chip ct-mechanism">core</span>' : ''}
              </div>
            </div>
          `).join('')}
        </div>
      `;
      showDetail(html);
    }

    // ─────────────────────────────────────────────
    // STATIC FALLBACK (if API not available)
    // ─────────────────────────────────────────────

    function renderStaticFallback() {
      document.getElementById('stat-frameworks').textContent = '6';
      document.getElementById('stat-concepts').textContent = '27';
      document.getElementById('stat-tensions').textContent = '8';
      document.getElementById('stat-evidence').textContent = '9';

      const staticFw = [
        { id: '1', code: 'FW-L0', title: 'L/0 Thesis', summary: 'The foundational claim that obligatory human labor is ending.', scope: 'descriptive', completeness: 'complete', layer_count: 0 },
        { id: '2', code: 'FW-PROS', title: 'Pyramid of Prosperity', summary: 'Five-layer income distribution architecture for the post-labor era.', scope: 'normative', completeness: 'complete', layer_count: 5 },
        { id: '3', code: 'FW-POW', title: 'Pyramid of Power', summary: 'Five-layer democratic infrastructure for the post-labor era.', scope: 'normative', completeness: 'complete', layer_count: 5 },
        { id: '4', code: 'FW-GATO', title: 'GATO Framework', summary: 'Global Automated Trade Organization governance model.', scope: 'analytical', completeness: 'draft', layer_count: 0 },
        { id: '5', code: 'FW-PRIME', title: 'PRIME Framework', summary: 'Policy evaluation rubric: Practicality, Rights, Implementation, Monitoring, Equity.', scope: 'evaluative', completeness: 'complete', layer_count: 5 },
        { id: '6', code: 'FW-LVN', title: 'Latent Value Network', summary: 'Framework for surfacing unmeasured human value contributions.', scope: 'analytical', completeness: 'draft', layer_count: 6 }
      ];
      state.frameworks = staticFw;
      renderFwOverview();

      document.getElementById('fw-count').textContent = '6';
      document.getElementById('phen-count').textContent = '—';
      document.getElementById('mech-count').textContent = '—';
      document.getElementById('prop-count').textContent = '—';
      document.getElementById('crit-count').textContent = '—';
      document.getElementById('ten-count').textContent = '—';

      document.getElementById('nav-frameworks').innerHTML = staticFw.map(fw => `
        <div class="nav-item" onclick="alert('Deploy to Netlify to enable full database connectivity.')">
          <div class="nav-item-dot" style="background:var(--hz)"></div>
          <div>
            <div class="nav-item-title">${fw.title}</div>
            <div class="nav-item-meta">${fw.code}</div>
          </div>
        </div>
      `).join('');
    }

    // ─────────────────────────────────────────────
    // SIDEBAR TOGGLES
    // ─────────────────────────────────────────────

    document.querySelectorAll('.nav-section-header').forEach(header => {
      header.addEventListener('click', () => {
        const section = header.closest('.nav-section');
        section.classList.toggle('open');
      });
    });

    // ─────────────────────────────────────────────
    // SEARCH
    // ─────────────────────────────────────────────

    document.getElementById('nav-search-input').addEventListener('input', e => {
      const q = e.target.value.toLowerCase();
      document.querySelectorAll('.nav-item').forEach(item => {
        const text = item.textContent.toLowerCase();
        item.style.display = q === '' || text.includes(q) ? '' : 'none';
      });
    });

    // ─────────────────────────────────────────────
    // INIT
    // ─────────────────────────────────────────────

    window.lucide.createIcons();
    loadAll();
  </script>
</body>
</html>
